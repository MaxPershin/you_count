# -*- coding: utf-8 -*-
#:import NoTransition kivy.uix.screenmanager.NoTransition


<ScreenManagerz>:
	transition: NoTransition()
	id: mana

	Screen:
		name: 'menu'
		FloatLayout:
			canvas:
				Color: 
					rgb: 1, 1, 1
				Rectangle:
					source: 'back.png'
					size: self.size
					pos: self.pos

			Label:
				text: root.best_record
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(60)
				pos_hint:{"center_x": .2,"center_y":.54}

			Label:
				text: 'Alpha v1.2'
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(15)
				pos_hint:{"center_x": .1,"center_y":.02}

			Label:
				text: 'Лучший счет:'
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(20)
				pos_hint:{"center_x": .2,"center_y":.6}

			Button:
				text: 'Классический режим'
				pos_hint: {'center_x': .5, 'center_y': .4}
				size_hint: (.7, .1)
				on_press: root.leggo()

			Button:
				text: 'Дуэль'
				pos_hint: {'center_x': .5, 'center_y': .28}
				size_hint: (.7, .1)
				on_press: root.current = 'duel'

			Button:
				text: 'Рекорды'
				pos_hint: {'center_x': .5, 'center_y': .16}
				size_hint: (.7, .1)
				on_press: root.load_records()
				on_press: root.current = 'records'
				


	Screen:
		name: 'count'
		FloatLayout:
			canvas:
				Color: 
					rgb: .2, .2, .2
				Rectangle:
					size: self.size
					pos: self.pos

			Label:
				canvas.before:
					Color: 
						rgb: .7, .2, .2
					Rectangle:
						size: self.size
						pos: self.pos
				font_size: sp(50)
				text: root.example
				size_hint: ( 1, .15)
				pos_hint:{"center_x": .5,"center_y":.8}

			Label:
				canvas.before: 
					Color: 
						rgb: root.true_false
					Rectangle: 
						pos: self.pos 
						size: self.size

				text: root.time
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(40)
				pos_hint:{"center_x": .5,"center_y":.95}

			Label:
				canvas.before:
					Color: 
						rgb: .4, .2, .5
					Rectangle:
						size: self.size
						pos: self.pos
				text: root.anwser
				size_hint: ( 1, .15)
				font_size: sp(50)
				pos_hint:{"center_x": .5,"center_y":.6}

			Label:
				id: plus
				text: '[color=00ff56]+25[/color]'
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( .2, .1)
				font_size: sp(40)
				pos_hint: root.pos_plus25
				markup: True

			Label:
				text: root.score
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(40)
				pos_hint:{"center_x": .1,"center_y":.95}

			Label:
				text: root.level
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(40)
				pos_hint:{"center_x": .9,"center_y":.95}

			Label:
				text: 'score'
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(30)
				pos_hint:{"center_x": .1,"center_y":.9}

			Label:
				text: 'level'
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( 1, .15)
				font_size: sp(30)
				pos_hint:{"center_x": .9,"center_y":.9}

			Image:
				id: heart_one
				size_hint: ( .08 , .08)
				pos_hint:{"center_x": .4,"center_y":.9}
				source: 'heart.png'

			Image:
				id: heart_two
				size_hint: ( .08 , .08)
				pos_hint:{"center_x": .5,"center_y":.9}
				source: 'heart.png'

			Image:
				id: heart_three
				size_hint: ( .08 , .08)
				pos_hint:{"center_x": .6,"center_y":.9}
				source: 'heart.png'

			Image:
				id: heart_gray_one
				size_hint: ( .08 , .08)
				pos_hint: root.pos_heart_gray_one
				source: 'heart_gray.png'

			Image:
				id: heart_gray_two
				size_hint: ( .08 , .08)
				pos_hint: root.pos_heart_gray_two
				source: 'heart_gray.png'

			Image:
				id: heart_gray_three
				size_hint: ( .08 , .08)
				pos_hint: root.pos_heart_gray_three
				source: 'heart_gray.png'

			Label:
				id: minus
				text: root.minus_text
				halign: 'center'
				valign: "middle"
				text_size: self.size
				size_hint: ( .2, .1)
				font_size: sp(40)
				pos_hint: root.pos_minus15
				markup: True

			Button:
				id: gotov
				pos_hint: root.pos_gotov
				text: 'Я готов!!!'
				size_hint: (.7, .05)
				on_press: root.ini_pb()
				on_press: root.generate_question()
				on_press: root.move_gui('True')
				on_press: root.start()

			Button:
				id: otvet
				pos_hint: root.pos_otvet
				text: 'Ответ'
				size_hint: (.9, .09)
				on_press: root.check_anwser()

			ProgressBar:
				max: root.pbmax
				value: root.pbvalue
				size_hint: (.7, .05)
				pos_hint:{"center_x": .5,"center_y":.7}

			Label:
				id: level_verh
				canvas.before:
					Color: 
						rgb: .2, 1, .2
					Rectangle:
						size: self.size
						pos: self.pos
				text: 'LEVEL UP!!!'
				size_hint: ( 1, .05)
				font_size: sp(25)
				pos_hint:{"center_x": -1,"center_y":.7}
			

			Button:
				id: skip
				text: "Пропустить"
				size_hint_y: .05
				size_hint_x: .4
				pos_hint: root.pos_skip
				font_size: sp(20)
				on_press: root.pre_skip_question()

			Button:
				id: give_up
				text: "Сдаюсь"
				size_hint_y: .05
				size_hint_x: .4
				pos_hint: root.pos_give_up
				font_size: sp(20)
				on_press: root.time = '-1'

			GridLayout:
				cols: 3
				size_hint_y: .35
				size_hint_x: .8
				pos_hint: {'center_x': .5, 'center_y': .275}
				canvas.before: 
					Color: 
						rgb: 0, .8, 0 
					Rectangle: 
						pos: self.pos 
						size: self.size
				Button:
					text: "1"
					font_size: sp(35)
					on_press: root.input('1')

				Button:
					text: "2"
					font_size: sp(35)
					on_press: root.input('2')
				Button:
					text: "3"
					font_size: sp(35)
					on_press: root.input('3')
				Button:
					text: "4"
					font_size: sp(35)
					on_press: root.input('4')
				Button:
					text: "5"
					font_size: sp(35)
					on_press: root.input('5')
				Button:
					text: "6"
					font_size: sp(35)
					on_press: root.input('6')
				Button:
					text: "7"
					font_size: sp(35)
					on_press: root.input('7')
				Button:
					text: "8"
					font_size: sp(35)
					on_press: root.input('8')
				Button:
					text: "9"
					font_size: sp(35)
					on_press: root.input('9')
				Button:
					text: "CLS"
					font_size: sp(35)
					on_press: root.input('CLS')
				Button:
					text: "0"
					font_size: sp(35)
					on_press: root.input('0')
				Button:
					text: "-"
					font_size: sp(35)
					on_press: root.input('-')

	Screen:
		name: 'results'
		FloatLayout:
			canvas:
				Color: 
					rgb: .2, .2, .2
				Rectangle:
					size: self.size
					pos: self.pos

		Label:
			font_size: sp(40)
			text: 'Игра окончена'
			size_hint: ( 1, .15)
			pos_hint:{"center_x": .5,"center_y":.95}

		Image:
			id: end_500
			size_hint: ( 1 , 1)
			pos_hint:{"center_x": -5,"center_y":.6}
			source: '500_s.png'

		Image:
			id: end_400
			size_hint: ( 1 , 1)
			pos_hint:{"center_x": -5,"center_y":.6}
			source: '400_s.png'

		Image:
			id: end_300
			size_hint: ( 1 , 1)
			pos_hint:{"center_x": -5,"center_y":.6}
			source: '300_s.png'

		Image:
			id: end_200
			size_hint: ( 1 , 1)
			pos_hint:{"center_x": -5,"center_y":.6}
			source: '200_s.png'

		Label:
			font_size: sp(35)
			text: 'Ваш результат: ' + root.score_copy
			size_hint: ( 1, .15)
			pos_hint:{"center_x": .5,"center_y":.3}

		TextInput:
			font_size: sp(25)
			id: user_name
			hint_text: 'Ваше имя'
			multiline: False
			size_hint: (.5, .05)
			pos_hint: {'center_x': .5, 'center_y': .23}

		Button:
			text: 'Сохранить результат в сети'
			pos_hint: {'center_x': .5, 'center_y': .14}
			size_hint: (.7, .06)
			on_press: root.send_record()

		Button:
			text: 'Выйти'
			pos_hint: {'center_x': .5, 'center_y': .07}
			size_hint: (.7, .06)
			on_press: root.clean_end_pics()
			on_press: root.current = 'menu'

		Label:
			id: saved_label
			canvas.before:
				Color: 
					rgb: .2, 1, .2
				Rectangle:
					size: self.size
					pos: self.pos
			text: 'Ваш рекорд сохранен'
			size_hint: ( 1, .05)
			font_size: sp(25)
			pos_hint:{"center_x": -5,"center_y":.23}

		Label:
			id: cant_save_label
			canvas.before:
				Color: 
					rgb: 1, .2, .2
				Rectangle:
					size: self.size
					pos: self.pos
			text: 'Ваш рекорд недостоин'
			size_hint: ( 1, .05)
			font_size: sp(25)
			pos_hint:{"center_x": -5,"center_y":.23}

	Screen:
		name: 'records'
		FloatLayout:
			canvas:
				Rectangle:
					source: "back_records.png"
					size: self.size
					pos: self.pos

		Label:
			font_size: sp(40)
			text: 'Чемпионы'
			size_hint: ( 1, .15)
			pos_hint:{"center_x": .5,"center_y":.68}

		Label:
			font_size: sp(25)
			text: root.champs
			size_hint: ( 1, .15)
			pos_hint:{"center_x": .5,"center_y":.4}

		Button:
			text: 'Выйти'
			pos_hint: {'center_x': .5, 'center_y': .07}
			size_hint: (.7, .06)
			on_press: root.records_sound.stop()
			on_press: root.current = 'menu'

	Screen:
		name: 'connect'
		FloatLayout:
			canvas:
				Color: 
					rgb: .2, .2, .2
				Rectangle:
					size: self.size
					pos: self.pos

		Label:
			font_size: sp(40)
			text: 'Соединение'
			size_hint: ( 1, .15)
			pos_hint:{"center_x": .5,"center_y":.85}

		TextInput:
			font_size: sp(25)
			id: internet_user_name
			hint_text: 'Ваше имя'
			multiline: False
			size_hint: (.5, .05)
			pos_hint: {'center_x': .5, 'center_y': .6}

		ScrollView:
			size_hint_x: .95
			size_hint_y: .3
			pos_hint: {'center_x': .5, 'center_y': .25}
			GridLayout:
				id: griddy
				canvas:
					Rectangle:
						pos: self.pos
						size: self.size
						source: "src/img/cleanbl.png"
				row_default_height: root.height/12 #row size control
				spacing: 2
				cols: 1
				size_hint_y: None
				height: 0

		Button:
			text: 'Найти соперника'
			pos_hint: {'center_x': .5, 'center_y': .5}
			size_hint: (.7, .06)
			on_press: root.find_opponent()


		Button:
			text: 'Выйти'
			pos_hint: {'center_x': .5, 'center_y': .07}
			size_hint: (.7, .06)
			on_press: root.current = 'menu'

	Screen:
		name: 'duel'
		FloatLayout:
			canvas:
				Color: 
					rgb: .2, .2, .2
				Rectangle:
					size: self.size
					pos: self.pos

			Label:
				canvas.before:
					Color: 
						rgb: .7, .2, .2
					Rectangle:
						size: self.size
						pos: self.pos
				font_size: sp(50)
				text: root.example
				size_hint: ( 1, .15)
				pos_hint:{"center_x": .5,"center_y":.93}


			Label:
				canvas.before:
					Color: 
						rgb: .4, .2, .5
					Rectangle:
						size: self.size
						pos: self.pos
				text: root.anwser
				size_hint: ( 1, .15)
				font_size: sp(50)
				pos_hint:{"center_x": .5,"center_y":.73}

			ToggleButton:
				allow_no_selection: False
				group: 'shield_sword'
				state: 'down'
				background_normal: 'shield_button.png'
				background_down: 'shield_button_on.png'
				size_hint: (.40, .2)
				pos_hint:{"center_x": .3,"center_y":.55}


			ToggleButton:
				allow_no_selection: False
				group: 'shield_sword'
				background_normal: 'sword_button.png'
				background_down: 'sword_button_on.png'
				size_hint: (.36, .2)
				pos_hint:{"center_x": .7,"center_y":.55}


			Button:
				id: otvet
				pos_hint: root.pos_otvet
				text: 'Ответ'
				size_hint: (.9, .09)

			ProgressBar:
				id: health
				max: 100
				value: 100
				size_hint: (1, .1)
				pos_hint:{"center_x": .5,"center_y":.83}
			

			GridLayout:
				cols: 3
				size_hint_y: .35
				size_hint_x: .8
				pos_hint: {'center_x': .5, 'center_y': .275}
				canvas.before: 
					Color: 
						rgb: 0, .8, 0 
					Rectangle: 
						pos: self.pos 
						size: self.size
				Button:
					text: "1"
					font_size: sp(35)
					on_press: root.input('1')

				Button:
					text: "2"
					font_size: sp(35)
					on_press: root.input('2')
				Button:
					text: "3"
					font_size: sp(35)
					on_press: root.input('3')
				Button:
					text: "4"
					font_size: sp(35)
					on_press: root.input('4')
				Button:
					text: "5"
					font_size: sp(35)
					on_press: root.input('5')
				Button:
					text: "6"
					font_size: sp(35)
					on_press: root.input('6')
				Button:
					text: "7"
					font_size: sp(35)
					on_press: root.input('7')
				Button:
					text: "8"
					font_size: sp(35)
					on_press: root.input('8')
				Button:
					text: "9"
					font_size: sp(35)
					on_press: root.input('9')
				Button:
					text: "CLS"
					font_size: sp(35)
					on_press: root.input('CLS')
				Button:
					text: "0"
					font_size: sp(35)
					on_press: root.input('0')
				Button:
					text: "-"
					font_size: sp(35)
					on_press: root.input('-')

		Button:
			text: 'Готов'
			pos_hint: {'center_x': .5, 'center_y': .05}
			size_hint: (.7, .06)
			on_press: root.got_hit(10)